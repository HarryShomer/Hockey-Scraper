
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NHL Scraping Functions &#8212; hockey_scraper 1.36 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Live Scraping" href="live_scrape.html" />
    <link rel="prev" title="Hockey-Scraper" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="live_scrape.html" title="Live Scraping"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Hockey-Scraper"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">hockey_scraper 1.36 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">NHL Scraping Functions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="nhl-scraping-functions">
<h1>NHL Scraping Functions<a class="headerlink" href="#nhl-scraping-functions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="scraping">
<h2>Scraping<a class="headerlink" href="#scraping" title="Permalink to this headline">¶</a></h2>
<p>There are three ways to scrape games:</p>
<p>1. <em>Scrape by Season</em>:</p>
<p>Scrape games on a season by season level (Note: A given season is referred to by the first of the two years it spans.
So you would refer to the 2016-2017 season as 2016).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hockey_scraper</span>

 <span class="c1"># Scrapes the 2015 &amp; 2016 season with shifts and stores the data in a Csv file (both are equivalent!!!)</span>
 <span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_seasons</span><span class="p">([</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">2016</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span>
 <span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_seasons</span><span class="p">([</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">2016</span><span class="p">],</span> <span class="kc">True</span><span class="p">,</span> <span class="n">data_format</span><span class="o">=</span><span class="s1">&#39;Csv&#39;</span><span class="p">)</span>

 <span class="c1"># Scrapes the 2008 season without shifts and returns a dictionary with the DataFrame</span>
 <span class="n">scraped_data</span> <span class="o">=</span> <span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_seasons</span><span class="p">([</span><span class="mi">2008</span><span class="p">],</span> <span class="kc">False</span><span class="p">,</span> <span class="n">data_format</span><span class="o">=</span><span class="s1">&#39;Pandas&#39;</span><span class="p">)</span>

 <span class="c1"># Scrapes 2014 season without shifts including preseason games</span>
 <span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_seasons</span><span class="p">([</span><span class="mi">2014</span><span class="p">],</span> <span class="kc">False</span><span class="p">,</span> <span class="n">preseason</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>2. <em>Scrape by Game</em>:</p>
<p>Scrape a list of games provided. All game ID’s can be found using <a class="reference external" href="https://statsapi.web.nhl.com/api/v1/schedule?startDate=2016-10-03&amp;endDate=2017-06-20">this link</a>
(you need to play around with the dates in the url).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hockey_scraper</span>

<span class="c1"># Scrapes the first game of 2014, 2015, and 2016 seasons with shifts and stores the data in a Csv file</span>
<span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_games</span><span class="p">([</span><span class="mi">2014020001</span><span class="p">,</span> <span class="mi">2015020001</span><span class="p">,</span> <span class="mi">2016020001</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span>

<span class="c1"># Scrapes the first game of 2007, 2008, and 2009 seasons with shifts and returns a a dictionary with the DataFrames</span>
<span class="n">scraped_data</span> <span class="o">=</span> <span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_games</span><span class="p">([</span><span class="mi">2007020001</span><span class="p">,</span> <span class="mi">2008020001</span><span class="p">,</span> <span class="mi">2009020001</span><span class="p">],</span> <span class="kc">True</span><span class="p">,</span> <span class="n">data_format</span><span class="o">=</span><span class="s1">&#39;Pandas&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>3. <em>Scrape by Date Range</em>:</p>
<p>Scrape all games between a specified date range. All dates must be written in a “yyyy-mm-dd” format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hockey_scraper</span>

<span class="c1"># Scrapes all games between date range without shifts and stores the data in a Csv file (both are equivalent!!!)</span>
<span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_date_range</span><span class="p">(</span><span class="s1">&#39;2016-10-10&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-10-20&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_date_range</span><span class="p">(</span><span class="s1">&#39;2016-10-10&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-10-20&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">preseason</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Scrapes all games between 2015-1-1 and 2015-1-15 without shifts and returns a a dictionary with the DataFrame</span>
<span class="n">scraped_data</span> <span class="o">=</span> <span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_date_range</span><span class="p">(</span><span class="s1">&#39;2015-1-1&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-1-15&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">data_format</span><span class="o">=</span><span class="s1">&#39;Pandas&#39;</span><span class="p">)</span>

<span class="c1"># Scrapes all games from 2014-09-15 to 2014-11-01 with shifts including preseason games</span>
<span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_date_range</span><span class="p">(</span><span class="s1">&#39;2014-09-15&#39;</span><span class="p">,</span> <span class="s1">&#39;2014-11-01&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">preseason</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>4. <em>Scrape Schedule</em></p>
<p>Scrape the schedule between any given date range for past and future games. All dates must be written in a “yyyy-mm-dd” format. The default data_format is equal to ‘Pandas’. This returns a DataFrame and not a dictionary like others. The columns returned are: [‘game_id’, ‘date’, ‘venue’, ‘home_team’, ‘away_team’, ‘start_time’, ‘home_score’, ‘away_score’, ‘status’]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hockey_scraper</span>

<span class="n">sched_df</span> <span class="o">=</span> <span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_schedule</span><span class="p">(</span><span class="s2">&quot;2019-10-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-07-01&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Persistent Data</strong></p>
<p>The option also exists to save the scraped files in another directory. This would speed up re-scraping any games since
we already have the docs needed for it. It would also be useful if you want to grab any extra information from them
as some of them contain a lot more information. In order to do this you can use the ‘docs_dir’ keyword. One can specify
the boolean value True to either create or refer (to an already created) directory in the home directory called
hockey_scraper data. Or you can specify the directory with the string of the path. If this is a valid directory,
when scraping each page it would first check if it was already scraped (therefore saving us the time of scraping it).
If it hasn’t been scraped yet, it will then grab it from the source and save it in the given directory.</p>
<p>Sometimes you may have already scraped and saved a file but you want to re-scrape it from the source and save it again
(this may seem strange but the NHL frequently fixes mistakes so you may want to update what you have). This can be done
by setting the keyword argument rescrape equal to True.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">hockey_scraper</span>

<span class="c1"># Path to the given directory</span>
<span class="c1"># Can also be True if you want the scraper to take care of it</span>
<span class="n">USER_PATH</span> <span class="o">=</span> <span class="s2">&quot;/....&quot;</span>

<span class="c1"># Scrapes the 2015 &amp; 2016 season with shifts and stores the data in a Csv file</span>
<span class="c1"># Also includes a path for an existing directory for the scraped files to be placed in or retrieved from.</span>
<span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_seasons</span><span class="p">([</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">2016</span><span class="p">],</span> <span class="kc">True</span><span class="p">,</span> <span class="n">docs_dir</span><span class="o">=</span><span class="n">USER_PATH</span><span class="p">)</span>

<span class="c1"># Once could chose to re-scrape previously saved files by making the keyword argument rescrape=True</span>
<span class="n">hockey_scraper</span><span class="o">.</span><span class="n">scrape_seasons</span><span class="p">([</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">2016</span><span class="p">],</span> <span class="kc">True</span><span class="p">,</span> <span class="n">docs_dir</span><span class="o">=</span><span class="n">USER_PATH</span><span class="p">,</span> <span class="n">rescrape</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Additional Notes</strong>:</p>
<p>1. For all three functions you must specify if you want to also scrape shifts (TOI tables) with a boolean. The Play by
Play is automatically scraped.</p>
<p>2. When scraping by date range or by season, preseason games aren’t scraped unless otherwise specified. Also preseason
games are scraped at your own risk. There is no guarantee it will work or that the files are even there!!!</p>
<p>3. For all three functions the scraped data is deposited into a Csv file unless it’s specified to return the DataFrames</p>
<p>4. The Dictionary with the DataFrames (and scraping errors) returned by setting data_format=’Pandas’ is structured like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="c1"># Both of these are always included</span>
   <span class="s1">&#39;pbp&#39;</span><span class="p">:</span> <span class="n">pbp_df</span><span class="p">,</span>

   <span class="c1"># This is only included when the argument &#39;if_scrape_shifts&#39; is set equal to True</span>
   <span class="s1">&#39;shifts&#39;</span><span class="p">:</span> <span class="n">shifts_df</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>5. When including a directory, it must be a valid directory. It will not create it for you. You’ll get an error message
but otherwise it will scrape as if no directory was provided.</p>
<div class="section" id="module-hockey_scraper.nhl.scrape_functions">
<span id="scrape-functions"></span><h3>Scrape Functions<a class="headerlink" href="#module-hockey_scraper.nhl.scrape_functions" title="Permalink to this headline">¶</a></h3>
<p>Functions to scrape by season, games, and date range</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.scrape_functions.print_errors">
<code class="sig-prename descclassname">hockey_scraper.nhl.scrape_functions.</code><code class="sig-name descname">print_errors</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">detailed</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.scrape_functions.print_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Print errors with scraping.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>detailed</strong> – When False only print player IDs otherwise all</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.scrape_functions.scrape_date_range">
<code class="sig-prename descclassname">hockey_scraper.nhl.scrape_functions.</code><code class="sig-name descname">scrape_date_range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">from_date</span></em>, <em class="sig-param"><span class="n">to_date</span></em>, <em class="sig-param"><span class="n">if_scrape_shifts</span></em>, <em class="sig-param"><span class="n">data_format</span><span class="o">=</span><span class="default_value">'csv'</span></em>, <em class="sig-param"><span class="n">preseason</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">rescrape</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">docs_dir</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.scrape_functions.scrape_date_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape games in given date range</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_date</strong> – date you want to scrape from</p></li>
<li><p><strong>to_date</strong> – date you want to scrape to</p></li>
<li><p><strong>if_scrape_shifts</strong> – Boolean indicating whether to also scrape shifts</p></li>
<li><p><strong>data_format</strong> – format you want data in - csv or  pandas (csv is default)</p></li>
<li><p><strong>preseason</strong> – Boolean indicating whether to include preseason games (default if False)
This is may or may not work!!! I don’t give a shit.</p></li>
<li><p><strong>rescrape</strong> – If you want to rescrape pages already scraped. Only applies if you supply a docs dir. (def. = None)</p></li>
<li><p><strong>docs_dir</strong> – Directory that either contains previously scraped docs or one that you want them to be deposited 
in after scraping. When True it’ll refer to (or if needed create) such a repository in the home
directory. When provided a string it’ll try to use that. Here it must be a valid directory otheriwse
it won’t work (I won’t make it for you). When False the files won’t be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary with DataFrames and errors or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.scrape_functions.scrape_games">
<code class="sig-prename descclassname">hockey_scraper.nhl.scrape_functions.</code><code class="sig-name descname">scrape_games</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">games</span></em>, <em class="sig-param"><span class="n">if_scrape_shifts</span></em>, <em class="sig-param"><span class="n">data_format</span><span class="o">=</span><span class="default_value">'csv'</span></em>, <em class="sig-param"><span class="n">rescrape</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">docs_dir</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.scrape_functions.scrape_games" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape a list of games</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>games</strong> – list of game_ids</p></li>
<li><p><strong>if_scrape_shifts</strong> – Boolean indicating whether to also scrape shifts</p></li>
<li><p><strong>data_format</strong> – format you want data in - csv or pandas (csv is default)</p></li>
<li><p><strong>rescrape</strong> – If you want to rescrape pages already scraped. Only applies if you supply a docs dir.</p></li>
<li><p><strong>docs_dir</strong> – Directory that either contains previously scraped docs or one that you want them to be deposited 
in after scraping. When True it’ll refer to (or if needed create) such a repository in the home
directory. When provided a string it’ll try to use that. Here it must be a valid directory otheriwse
it won’t work (I won’t make it for you). When False the files won’t be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary with DataFrames and errors or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.scrape_functions.scrape_list_of_games">
<code class="sig-prename descclassname">hockey_scraper.nhl.scrape_functions.</code><code class="sig-name descname">scrape_list_of_games</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">games</span></em>, <em class="sig-param"><span class="n">if_scrape_shifts</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.scrape_functions.scrape_list_of_games" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of game_id’s (and a date for each game) it scrapes them</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>games</strong> – list of [game_id, date]</p></li>
<li><p><strong>if_scrape_shifts</strong> – Boolean indicating whether to also scrape shifts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame of pbp info, also shifts if specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.scrape_functions.scrape_schedule">
<code class="sig-prename descclassname">hockey_scraper.nhl.scrape_functions.</code><code class="sig-name descname">scrape_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">from_date</span></em>, <em class="sig-param"><span class="n">to_date</span></em>, <em class="sig-param"><span class="n">data_format</span><span class="o">=</span><span class="default_value">'pandas'</span></em>, <em class="sig-param"><span class="n">rescrape</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">docs_dir</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.scrape_functions.scrape_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the games schedule in a given range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_date</strong> – date you want to scrape from</p></li>
<li><p><strong>to_date</strong> – date you want to scrape to</p></li>
<li><p><strong>data_format</strong> – format you want data in - csv or  pandas (pandas is default)</p></li>
<li><p><strong>rescrape</strong> – If you want to rescrape pages already scraped. Only applies if you supply a docs dir. (def. = None)</p></li>
<li><p><strong>docs_dir</strong> – Directory that either contains previously scraped docs or one that you want them to be deposited 
in after scraping. When True it’ll refer to (or if needed create) such a repository in the home
directory. When provided a string it’ll try to use that. Here it must be a valid directory otheriwse
it won’t work (I won’t make it for you). When False the files won’t be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame of None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.scrape_functions.scrape_seasons">
<code class="sig-prename descclassname">hockey_scraper.nhl.scrape_functions.</code><code class="sig-name descname">scrape_seasons</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seasons</span></em>, <em class="sig-param"><span class="n">if_scrape_shifts</span></em>, <em class="sig-param"><span class="n">data_format</span><span class="o">=</span><span class="default_value">'csv'</span></em>, <em class="sig-param"><span class="n">preseason</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">rescrape</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">docs_dir</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.scrape_functions.scrape_seasons" title="Permalink to this definition">¶</a></dt>
<dd><p>Given list of seasons it scrapes all the seasons</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seasons</strong> – list of seasons</p></li>
<li><p><strong>if_scrape_shifts</strong> – Boolean indicating whether to also scrape shifts</p></li>
<li><p><strong>data_format</strong> – format you want data in - csv or pandas (csv is default)</p></li>
<li><p><strong>preseason</strong> – Boolean indicating whether to include preseason games (default if False)
This is may or may not work!!! I don’t give a shit.</p></li>
<li><p><strong>rescrape</strong> – If you want to rescrape pages already scraped. Only applies if you supply a docs dir.</p></li>
<li><p><strong>docs_dir</strong> – Directory that either contains previously scraped docs or one that you want them to be deposited 
in after scraping. When True it’ll refer to (or if needed create) such a repository in the home
directory. When provided a string it’ll try to use that. Here it must be a valid directory otheriwse
it won’t work (I won’t make it for you). When False the files won’t be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary with DataFrames and errors or None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.nhl.game_scraper">
<span id="game-scraper"></span><h3>Game Scraper<a class="headerlink" href="#module-hockey_scraper.nhl.game_scraper" title="Permalink to this headline">¶</a></h3>
<p>This module contains code to scrape data for a single game</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.check_goalie">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">check_goalie</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">row</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.check_goalie" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks for bad goalie names (you can tell by them having no player id)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>row</strong> – df row</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.combine_espn_html_pbp">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">combine_espn_html_pbp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">html_df</span></em>, <em class="sig-param"><span class="n">espn_df</span></em>, <em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">away_team</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.combine_espn_html_pbp" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge the coordinate from the espn feed into the html DataFrame</p>
<p>Can’t join here on event_id because the plays are often out of order and pre-2009 are often missing events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>html_df</strong> – DataFrame with info from html pbp</p></li>
<li><p><strong>espn_df</strong> – DataFrame with info from espn pbp</p></li>
<li><p><strong>game_id</strong> – json game id</p></li>
<li><p><strong>date</strong> – ex: 2016-10-24</p></li>
<li><p><strong>away_team</strong> – away team</p></li>
<li><p><strong>home_team</strong> – home team</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>merged DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.combine_html_json_pbp">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">combine_html_json_pbp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_df</span></em>, <em class="sig-param"><span class="n">html_df</span></em>, <em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.combine_html_json_pbp" title="Permalink to this definition">¶</a></dt>
<dd><p>Join both data sources. First try merging on event id (which is the DataFrame index) if both DataFrames have the
same number of rows. If they don’t have the same number of rows, merge on: Period’, Event, Seconds_Elapsed, p1_ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_df</strong> – json pbp DataFrame</p></li>
<li><p><strong>html_df</strong> – html pbp DataFrame</p></li>
<li><p><strong>game_id</strong> – id of game</p></li>
<li><p><strong>date</strong> – date of game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>finished pbp</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.combine_players_lists">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">combine_players_lists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">json_players</span></em>, <em class="sig-param"><span class="n">roster_players</span></em>, <em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.combine_players_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine the json list of players (which contains id’s) with the list in the roster html</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_players</strong> – dict of all players with id’s</p></li>
<li><p><strong>roster_players</strong> – dict with home and and away keys for players</p></li>
<li><p><strong>game_id</strong> – id of game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict containing home and away keys -&gt; which contains list of info on each player</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.get_players_json">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">get_players_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_json</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.get_players_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dict of players for that game by team</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>players_json</strong> – players section of json</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>{team -&gt; players}</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.get_teams_and_players">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">get_teams_and_players</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_json</span></em>, <em class="sig-param"><span class="n">roster</span></em>, <em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.get_teams_and_players" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of players and teams for game</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_json</strong> – json pbp for game</p></li>
<li><p><strong>roster</strong> – players from roster html</p></li>
<li><p><strong>game_id</strong> – id for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict for both - players and teams</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.scrape_game">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">scrape_game</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">if_scrape_shifts</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.scrape_game" title="Permalink to this definition">¶</a></dt>
<dd><p>This scrapes the info for the game.
The pbp is automatically scraped, and the whether or not to scrape the shifts is left up to the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_id</strong> – game to scrap</p></li>
<li><p><strong>date</strong> – ex: 2016-10-24</p></li>
<li><p><strong>if_scrape_shifts</strong> – Boolean indicating whether to also scrape shifts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame of pbp info
(optional) DataFrame with shift info otherwise just None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.scrape_pbp">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">scrape_pbp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">roster</span></em>, <em class="sig-param"><span class="n">game_json</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">teams</span></em>, <em class="sig-param"><span class="n">espn_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">html_df</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.scrape_pbp" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the Pbp info. The HTML is always scraped.</p>
<p>The Json is parse whe season &gt;= 2010 and there are plays. Otherwise ESPN is gotten to supplement
the HTML with coordinate.</p>
<p>The espn_id and the html data can be fed as keyword argument to speed up execution. This is used by
the live game scraping class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_id</strong> – json game id</p></li>
<li><p><strong>date</strong> – date of game</p></li>
<li><p><strong>roster</strong> – list of players in pre game roster</p></li>
<li><p><strong>game_json</strong> – json pbp for game</p></li>
<li><p><strong>players</strong> – dict of players</p></li>
<li><p><strong>teams</strong> – dict of teams</p></li>
<li><p><strong>espn_id</strong> – Game Id for the espn game. Only provided when live scraping</p></li>
<li><p><strong>html_df</strong> – Can provide DataFrame for html. Only done for live-scraping</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info or None if it fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.scrape_pbp_live">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">scrape_pbp_live</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">roster</span></em>, <em class="sig-param"><span class="n">game_json</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">teams</span></em>, <em class="sig-param"><span class="n">espn_id</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.scrape_pbp_live" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for scraping the live pbp</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_id</strong> – json game id</p></li>
<li><p><strong>date</strong> – date of game</p></li>
<li><p><strong>roster</strong> – list of players in pre game roster</p></li>
<li><p><strong>game_json</strong> – json pbp for game</p></li>
<li><p><strong>players</strong> – dict of players</p></li>
<li><p><strong>teams</strong> – dict of teams</p></li>
<li><p><strong>espn_id</strong> – Game Id for the espn game. Only provided when live scraping</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple - pbp &amp; status</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.game_scraper.scrape_shifts">
<code class="sig-prename descclassname">hockey_scraper.nhl.game_scraper.</code><code class="sig-name descname">scrape_shifts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.game_scraper.scrape_shifts" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the Shift charts (or TOI tables)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_id</strong> – json game id</p></li>
<li><p><strong>players</strong> – dict of players with numbers and id’s</p></li>
<li><p><strong>date</strong> – date of game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info or None if it fails</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.nhl.pbp.html_pbp">
<span id="html-pbp"></span><h3>Html PBP<a class="headerlink" href="#module-hockey_scraper.nhl.pbp.html_pbp" title="Permalink to this headline">¶</a></h3>
<p>This module contains functions to scrape the Html Play by Play for any given game</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_event_players">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_event_players</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_event_players" title="Permalink to this definition">¶</a></dt>
<dd><p>Add players involved in the event to event_dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of parsed event stuff</p></li>
<li><p><strong>event</strong> – fixed up html</p></li>
<li><p><strong>players</strong> – dict of players and id’s</p></li>
<li><p><strong>home_team</strong> – home team</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_event_team">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_event_team</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">event</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_event_team" title="Permalink to this definition">¶</a></dt>
<dd><p>Add event team for event</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of event info</p></li>
<li><p><strong>event</strong> – list with parsed event info</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_home_zone">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_home_zone</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_home_zone" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the zone relative to the home team and add it to event.</p>
<p>Keep in mind that the ‘ev_zone’ recorded is the zone relative to the event team. And for blocks the NHL counts
the ev_team as the blocking team (I like counting the shooting team for blocks). Therefore, when it’s the home team
the zone only gets flipped when it’s a block. For away teams it’s the opposite.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of event info</p></li>
<li><p><strong>home_team</strong> – home team</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_period">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_period</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">event</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Add period for event</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of event info</p></li>
<li><p><strong>event</strong> – list with parsed event info</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_score">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_score</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">current_score</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Change if someone scored…also change current score</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of parsed event stuff</p></li>
<li><p><strong>event</strong> – event info from pbp</p></li>
<li><p><strong>current_score</strong> – current score in game</p></li>
<li><p><strong>home_team</strong> – home team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_strength">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_strength</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">home_players</span></em>, <em class="sig-param"><span class="n">away_players</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_strength" title="Permalink to this definition">¶</a></dt>
<dd><p>Get strength for event -&gt; It’s home then away</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of event info</p></li>
<li><p><strong>home_players</strong> – list of players for home team</p></li>
<li><p><strong>away_players</strong> – list of players for away team</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_time">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">event</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill in time and seconds elapsed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of parsed event stuff</p></li>
<li><p><strong>event</strong> – event info from pbp</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_type">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Add “type” for event -&gt; either a penalty or a shot type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of event info</p></li>
<li><p><strong>event</strong> – list with parsed event info</p></li>
<li><p><strong>players</strong> – dict of home and away players in game</p></li>
<li><p><strong>home_team</strong> – home team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.add_zone">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">add_zone</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">play_description</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.add_zone" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine which zone the play occurred in (unless one isn’t listed) and add it to dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict of event info</p></li>
<li><p><strong>play_description</strong> – the zone would be included here</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Off, Def, Neu, or NA</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.clean_html_pbp">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">clean_html_pbp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">html</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.clean_html_pbp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get rid of html and format the data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>html</strong> – the requested url</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list with all the info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.cur_game_status">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">cur_game_status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">doc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.cur_game_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the game status</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>doc</strong> – Html text</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String -&gt; one of [‘Final’, ‘Intermission’, ‘Progress’]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.get_contents">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">get_contents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_html</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.get_contents" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses Beautiful soup to parses the html document.
Some parsers work for some pages but don’t work for others….I’m not sure why so I just try them all here in order</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_html</strong> – html doc</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>“soupified” html</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.get_pbp">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">get_pbp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.get_pbp" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a game_id it returns the raw html
Ex: <a class="reference external" href="http://www.nhl.com/scores/htmlreports/20162017/PL020475.HTM">http://www.nhl.com/scores/htmlreports/20162017/PL020475.HTM</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_id</strong> – the game</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>raw html of game</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.get_penalty">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">get_penalty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">play_description</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.get_penalty" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the penalty info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>play_description</strong> – description of play field</p></li>
<li><p><strong>players</strong> – all players with info</p></li>
<li><p><strong>home_team</strong> – home team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>penalty info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.get_player_name">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">get_player_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">number</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">team</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.get_player_name" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used for the description field in the html. Given a last name and a number it return the player’s 
full name and id. Done by searching in players for the team until we find him (then just break)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number</strong> – player’s number</p></li>
<li><p><strong>players</strong> – all players with info</p></li>
<li><p><strong>team</strong> – team of player</p></li>
<li><p><strong>home_team</strong> – home team</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with full and and id</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.if_valid_event">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">if_valid_event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.if_valid_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if it’s a valid event (‘#’ is meaningless and I don’t like those other one’s) to parse</p>
<p>Don’t remember what ‘GOFF’ is but ‘EGT’ is for emergency goaltender. The reason I get rid of it is because it’s not
in the json and there’s another ‘EGPID’ that can be found in both (not sure why ‘EGT’ exists then).</p>
<p>Events ‘PGSTR’, ‘PGEND’, and ‘ANTHEM’ have been included at the start of each game for the 2017 season…I have no
idea why.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – list of stuff in pbp</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.parse_block">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">parse_block</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">description</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.parse_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the description field for a BLOCK</p>
<p>MTL #76 SUBBAN BLOCKED BY TOR #2 SCHENN, Wrist, Def. Zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>description</strong> – Play Description</p></li>
<li><p><strong>players</strong> – players in game</p></li>
<li><p><strong>home_team</strong> – Home Team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.parse_event">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">parse_event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">home_team</span></em>, <em class="sig-param"><span class="n">current_score</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.parse_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives an event and parses it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> – event type</p></li>
<li><p><strong>players</strong> – players in game</p></li>
<li><p><strong>home_team</strong> – home team</p></li>
<li><p><strong>current_score</strong> – current score for both teams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.parse_fac">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">parse_fac</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">description</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">ev_team</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.parse_fac" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the description field for a face-off
MTL won Neu. Zone - MTL #11 GOMEZ vs TOR #37 BRENT</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>description</strong> – Play Description</p></li>
<li><p><strong>players</strong> – players in game</p></li>
<li><p><strong>ev_team</strong> – Event Team</p></li>
<li><p><strong>home_team</strong> – Home Team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.parse_goal">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">parse_goal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">description</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">ev_team</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.parse_goal" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the description field for a GOAL</p>
<p>TOR #81 KESSEL(1), Wrist, Off. Zone, 14 ft. Assists: #42 BOZAK(1); #8 KOMISAREK(1)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>description</strong> – Play Description</p></li>
<li><p><strong>players</strong> – players in game</p></li>
<li><p><strong>ev_team</strong> – Event Team</p></li>
<li><p><strong>home_team</strong> – Home Team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.parse_hit">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">parse_hit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">description</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.parse_hit" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the description field for a HIT</p>
<p>MTL #20 O’BYRNE HIT TOR #18 BROWN, Def. Zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>description</strong> – Play Description</p></li>
<li><p><strong>players</strong> – players in game</p></li>
<li><p><strong>home_team</strong> – Home Team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.parse_html">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">parse_html</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">html</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">teams</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.parse_html" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse html game pbp</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>html</strong> – raw html</p></li>
<li><p><strong>players</strong> – players in the game (from json pbp)</p></li>
<li><p><strong>teams</strong> – dict with home and away teams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.parse_penalty">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">parse_penalty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">description</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.parse_penalty" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the description field for a Penalty</p>
<p>MTL #81 ELLER Hooking(2 min), Def. Zone Drawn By: TOR #11 SJOSTROM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>description</strong> – Play Description</p></li>
<li><p><strong>players</strong> – players in game</p></li>
<li><p><strong>home_team</strong> – Home Team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.parse_shot_miss_take_give">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">parse_shot_miss_take_give</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">description</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">ev_team</span></em>, <em class="sig-param"><span class="n">home_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.parse_shot_miss_take_give" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the description field for a: SHOT, MISS, TAKE, GIVE</p>
<p>MTL ONGOAL - #81 ELLER, Wrist, Off. Zone, 11 ft.
ANA #23 BEAUCHEMIN, Slap, Wide of Net, Off. Zone, 42 ft.
TOR GIVEAWAY - #35 GIGUERE, Def. Zone
TOR TAKEAWAY - #9 ARMSTRONG, Off. Zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>description</strong> – Play Description</p></li>
<li><p><strong>players</strong> – players in game</p></li>
<li><p><strong>ev_team</strong> – Event Team</p></li>
<li><p><strong>home_team</strong> – Home Team for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.populate_players">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">populate_players</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event_dict</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">away_players</span></em>, <em class="sig-param"><span class="n">home_players</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.populate_players" title="Permalink to this definition">¶</a></dt>
<dd><p>Populate away and home player info (and num skaters on each side).</p>
<dl class="simple">
<dt>These include:</dt><dd><ol class="arabic simple">
<li><p>HomePlayer &amp; AwayPlayers fields from 1-6 for name/id</p></li>
<li><p>Home &amp; Away Goalie Fields for name/id</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_dict</strong> – dict with event info</p></li>
<li><p><strong>players</strong> – all players in game and info</p></li>
<li><p><strong>away_players</strong> – players for away team</p></li>
<li><p><strong>home_players</strong> – players for home team</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.return_name_html">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">return_name_html</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.return_name_html" title="Permalink to this definition">¶</a></dt>
<dd><p>In the PBP html the name is in a format like: ‘Center - MIKE RICHARDS’
Some also have a hyphen in their last name so can’t just split by ‘-‘</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>info</strong> – position and name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>name</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.scrape_game">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">scrape_game</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">teams</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.scrape_game" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the data for the game when not live</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_id</strong> – game to scrape</p></li>
<li><p><strong>players</strong> – dict with player info</p></li>
<li><p><strong>teams</strong> – dict with home and away teams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame of game info or None if it fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.scrape_game_live">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">scrape_game_live</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">teams</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.scrape_game_live" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the data for the game when it’s live</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_id</strong> – game to scrape</p></li>
<li><p><strong>players</strong> – dict with player info</p></li>
<li><p><strong>teams</strong> – dict with home and away teams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple - get_pbp(), cur_game_status()</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.scrape_pbp">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">scrape_pbp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_html</span></em>, <em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">players</span></em>, <em class="sig-param"><span class="n">teams</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.scrape_pbp" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the data for the pbp</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_html</strong> – Html doc for the game</p></li>
<li><p><strong>game_id</strong> – game to scrape</p></li>
<li><p><strong>players</strong> – dict with player info</p></li>
<li><p><strong>teams</strong> – dict with home and away teams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame of game info or None if it fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.shot_type">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">shot_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">play_description</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.shot_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine which zone the play occurred in (unless one isn’t listed)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>play_description</strong> – the type would be in here</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the type if it’s there (otherwise just NA)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.html_pbp.strip_html_pbp">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.html_pbp.</code><code class="sig-name descname">strip_html_pbp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">td</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.html_pbp.strip_html_pbp" title="Permalink to this definition">¶</a></dt>
<dd><p>Strip html tags and such</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>td</strong> – pbp</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of plays (which contain a list of info) stripped of html</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.nhl.pbp.json_pbp">
<span id="json-pbp"></span><h3>Json PBP<a class="headerlink" href="#module-hockey_scraper.nhl.pbp.json_pbp" title="Permalink to this headline">¶</a></h3>
<p>This module contains functions to scrape the Json Play by Play for any given game</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.json_pbp.change_event_name">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.json_pbp.</code><code class="sig-name descname">change_event_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.json_pbp.change_event_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Change event names from json style to html (ex: BLOCKED_SHOT to BLOCK).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – event type</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>fixed event type</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.json_pbp.get_pbp">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.json_pbp.</code><code class="sig-name descname">get_pbp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.json_pbp.get_pbp" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a game_id it returns the raw json
Ex: <a class="reference external" href="http://statsapi.web.nhl.com/api/v1/game/2016020475/feed/live">http://statsapi.web.nhl.com/api/v1/game/2016020475/feed/live</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_id</strong> – string - the game</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>raw json of game or None if couldn’t get game</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.json_pbp.get_teams">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.json_pbp.</code><code class="sig-name descname">get_teams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pbp_json</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.json_pbp.get_teams" title="Permalink to this definition">¶</a></dt>
<dd><p>Get teams</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pbp_json</strong> – raw play by play json</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with home and away</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.json_pbp.parse_event">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.json_pbp.</code><code class="sig-name descname">parse_event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.json_pbp.parse_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a single event when the info is in a json format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – json of event</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary with the info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.json_pbp.parse_json">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.json_pbp.</code><code class="sig-name descname">parse_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_json</span></em>, <em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.json_pbp.parse_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the json for a game</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_json</strong> – raw json</p></li>
<li><p><strong>game_id</strong> – game id for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Either a DataFrame with info for the game or None when fail</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.json_pbp.scrape_game">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.json_pbp.</code><code class="sig-name descname">scrape_game</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.json_pbp.scrape_game" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Used for debugging</strong></p>
<p>HTML depends on json so can’t follow this structure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_id</strong> – game to scrape</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame of game info</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.nhl.pbp.espn_pbp">
<span id="espn-pbp"></span><h3>Espn PBP<a class="headerlink" href="#module-hockey_scraper.nhl.pbp.espn_pbp" title="Permalink to this headline">¶</a></h3>
<p>This module contains code to scrape coordinates for games off of espn for any given game</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.event_type">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">event_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">play_description</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.event_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the event type (ex: a SHOT or a GOAL…etc) given the event description.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>play_description</strong> – description of play</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>event</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.get_espn_date">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">get_espn_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.get_espn_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the page that contains all the games for that day</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> – YYYY-MM-DD</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>response</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.get_espn_game">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">get_espn_game</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">home_team</span></em>, <em class="sig-param"><span class="n">away_team</span></em>, <em class="sig-param"><span class="n">game_id</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.get_espn_game" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the ESPN pbp feed 
Ex: <a class="reference external" href="http://www.espn.com/nhl/gamecast/data/masterFeed?lang=en&amp;isAll=true&amp;gameId=400885300">http://www.espn.com/nhl/gamecast/data/masterFeed?lang=en&amp;isAll=true&amp;gameId=400885300</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> – date of the game</p></li>
<li><p><strong>home_team</strong> – home team</p></li>
<li><p><strong>away_team</strong> – away team</p></li>
<li><p><strong>game_id</strong> – Game id of we already have it - for live scraping. None if not there</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>raw xml</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.get_espn_game_id">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">get_espn_game_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">home_team</span></em>, <em class="sig-param"><span class="n">away_team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.get_espn_game_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrapes the day’s schedule and gets the id for the given game
Ex: <a class="reference external" href="http://www.espn.com/nhl/scoreboard/_/date/20161024">http://www.espn.com/nhl/scoreboard/_/date/20161024</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> – format-&gt; YearMonthDay-&gt; 20161024</p></li>
<li><p><strong>home_team</strong> – home team</p></li>
<li><p><strong>away_team</strong> – away team</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>9 digit game id as a string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.get_game_ids">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">get_game_ids</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">response</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.get_game_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get game_ids for date from doc</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>response</strong> – doc</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of game_ids</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.get_teams">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">get_teams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">response</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.get_teams" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract Teams for date from doc</p>
<p>ul-&gt; class = ScoreCell__Competitors</p>
<p>div -&gt; class = ScoreCell__TeamName ScoreCell__TeamName–shortDisplayName truncate db</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>response</strong> – doc</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of teams</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.parse_espn">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">parse_espn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">espn_xml</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.parse_espn" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse feed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>espn_xml</strong> – raw xml of feed</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.parse_event">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">parse_event</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.parse_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse each event. In the string each field is separated by a ‘~’. 
Relevant for here: The first two are the x and y coordinates. And the 4th and 5th are the time elapsed and period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event</strong> – string with info</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>return dict with relevant info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.pbp.espn_pbp.scrape_game">
<code class="sig-prename descclassname">hockey_scraper.nhl.pbp.espn_pbp.</code><code class="sig-name descname">scrape_game</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">home_team</span></em>, <em class="sig-param"><span class="n">away_team</span></em>, <em class="sig-param"><span class="n">game_id</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.pbp.espn_pbp.scrape_game" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the game</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> – ex: 2016-20-24</p></li>
<li><p><strong>home_team</strong> – tricode</p></li>
<li><p><strong>away_team</strong> – tricode</p></li>
<li><p><strong>game_id</strong> – Only provided for live games.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.nhl.shifts.json_shifts">
<span id="json-shifts"></span><h3>Json Shifts<a class="headerlink" href="#module-hockey_scraper.nhl.shifts.json_shifts" title="Permalink to this headline">¶</a></h3>
<p>This module contains functions to scrape the Json toi/shifts for any given game</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.json_shifts.fix_team_tricode">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.json_shifts.</code><code class="sig-name descname">fix_team_tricode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tricode</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.json_shifts.fix_team_tricode" title="Permalink to this definition">¶</a></dt>
<dd><p>Some of the tricodes are different than how I want them</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tricode</strong> – 3 letter team name - ex: NYR</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>fixed tricode</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.json_shifts.get_shifts">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.json_shifts.</code><code class="sig-name descname">get_shifts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.json_shifts.get_shifts" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a game_id it returns the raw json
Ex: <a class="reference external" href="https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2019020001">https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2019020001</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_id</strong> – the game</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>json or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.json_shifts.parse_json">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.json_shifts.</code><code class="sig-name descname">parse_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shift_json</span></em>, <em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.json_shifts.parse_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the json</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shift_json</strong> – raw json</p></li>
<li><p><strong>game_id</strong> – if of game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.json_shifts.parse_shift">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.json_shifts.</code><code class="sig-name descname">parse_shift</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shift</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.json_shifts.parse_shift" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse shift for json</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>shift</strong> – json for shift</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with shift info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.json_shifts.scrape_game">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.json_shifts.</code><code class="sig-name descname">scrape_game</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.json_shifts.scrape_game" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the game.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_id</strong> – game</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info for the game</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.nhl.shifts.html_shifts">
<span id="html-shifts"></span><h3>Html Shifts<a class="headerlink" href="#module-hockey_scraper.nhl.shifts.html_shifts" title="Permalink to this headline">¶</a></h3>
<p>This module contains functions to scrape the Html Toi Tables (or shifts) for any given game</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.html_shifts.analyze_shifts">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.html_shifts.</code><code class="sig-name descname">analyze_shifts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shift</span></em>, <em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">team</span></em>, <em class="sig-param"><span class="n">home_team</span></em>, <em class="sig-param"><span class="n">player_ids</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.html_shifts.analyze_shifts" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze shifts for each player when using.
Prior to this each player (in a dictionary) has a list with each entry being a shift.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shift</strong> – info on shift</p></li>
<li><p><strong>name</strong> – player name</p></li>
<li><p><strong>team</strong> – given team</p></li>
<li><p><strong>home_team</strong> – home team for given game</p></li>
<li><p><strong>player_ids</strong> – dict with info on players</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with info for shift</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.html_shifts.get_shifts">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.html_shifts.</code><code class="sig-name descname">get_shifts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.html_shifts.get_shifts" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a game_id it returns a the shifts for both teams
Ex: <a class="reference external" href="http://www.nhl.com/scores/htmlreports/20162017/TV020971.HTM">http://www.nhl.com/scores/htmlreports/20162017/TV020971.HTM</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_id</strong> – the game</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Shifts or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.html_shifts.get_soup">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.html_shifts.</code><code class="sig-name descname">get_soup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shifts_html</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.html_shifts.get_soup" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses Beautiful soup to parses the html document.
Some parsers work for some pages but don’t work for others….I’m not sure why so I just try them all here in order</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>shifts_html</strong> – html doc</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>“soupified” html and player_shifts portion of html (it’s a bunch of td tags)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.html_shifts.get_teams">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.html_shifts.</code><code class="sig-name descname">get_teams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">soup</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.html_shifts.get_teams" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the team for the TOI tables and the home team</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>soup</strong> – souped up html</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list with team and home team</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.html_shifts.parse_html">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.html_shifts.</code><code class="sig-name descname">parse_html</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">html</span></em>, <em class="sig-param"><span class="n">player_ids</span></em>, <em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.html_shifts.parse_html" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the html</p>
<p>Note: Don’t fuck with this!!! I’m not exactly sure how or why but it works.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>html</strong> – cleaned up html</p></li>
<li><p><strong>player_ids</strong> – dict of home and away players</p></li>
<li><p><strong>game_id</strong> – id for game</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.shifts.html_shifts.scrape_game">
<code class="sig-prename descclassname">hockey_scraper.nhl.shifts.html_shifts.</code><code class="sig-name descname">scrape_game</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em>, <em class="sig-param"><span class="n">players</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.shifts.html_shifts.scrape_game" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape the game.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>game_id</strong> – id for game</p></li>
<li><p><strong>players</strong> – list of players</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame with info for the game</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.nhl.json_schedule">
<span id="schedule"></span><h3>Schedule<a class="headerlink" href="#module-hockey_scraper.nhl.json_schedule" title="Permalink to this headline">¶</a></h3>
<p>This module contains functions to scrape the json schedule for any games or date range</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.json_schedule.chunk_schedule_calls">
<code class="sig-prename descclassname">hockey_scraper.nhl.json_schedule.</code><code class="sig-name descname">chunk_schedule_calls</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">from_date</span></em>, <em class="sig-param"><span class="n">to_date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.json_schedule.chunk_schedule_calls" title="Permalink to this definition">¶</a></dt>
<dd><p>The schedule endpoint sucks when handling a big date range. So instead I call in increments of n days.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date_from</strong> – scrape from this date</p></li>
<li><p><strong>date_to</strong> – scrape until this date</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>raw json of schedule of date range</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.json_schedule.get_dates">
<code class="sig-prename descclassname">hockey_scraper.nhl.json_schedule.</code><code class="sig-name descname">get_dates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">games</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.json_schedule.get_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list game_ids it returns the dates for each game.</p>
<p>We sort all the games and retrieve the schedule from the beginning of the season from the earliest game
until the end of most recent season.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>games</strong> – list with game_id’s ex: 2016020001</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list with game_id and corresponding date for all games</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.json_schedule.get_schedule">
<code class="sig-prename descclassname">hockey_scraper.nhl.json_schedule.</code><code class="sig-name descname">get_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date_from</span></em>, <em class="sig-param"><span class="n">date_to</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.json_schedule.get_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrapes games in date range
Ex: <a class="reference external" href="https://statsapi.web.nhl.com/api/v1/schedule?startDate=2010-10-03&amp;endDate=2011-06-20">https://statsapi.web.nhl.com/api/v1/schedule?startDate=2010-10-03&amp;endDate=2011-06-20</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date_from</strong> – scrape from this date</p></li>
<li><p><strong>date_to</strong> – scrape until this date</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>raw json of schedule of date range</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.json_schedule.scrape_schedule">
<code class="sig-prename descclassname">hockey_scraper.nhl.json_schedule.</code><code class="sig-name descname">scrape_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date_from</span></em>, <em class="sig-param"><span class="n">date_to</span></em>, <em class="sig-param"><span class="n">preseason</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">not_over</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.json_schedule.scrape_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls getSchedule and scrapes the raw schedule Json</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date_from</strong> – scrape from this date</p></li>
<li><p><strong>date_to</strong> – scrape until this date</p></li>
<li><p><strong>preseason</strong> – Boolean indicating whether include preseason games (default if False)</p></li>
<li><p><strong>not_over</strong> – Boolean indicating whether we scrape games not finished. 
Means we relax the requirement of checking if the game is over.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list with all the game id’s</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.nhl.playing_roster">
<span id="playing-roster"></span><h3>Playing Roster<a class="headerlink" href="#module-hockey_scraper.nhl.playing_roster" title="Permalink to this headline">¶</a></h3>
<p>This module contains functions to scrape the Html game roster for any given game</p>
<dl class="py function">
<dt id="hockey_scraper.nhl.playing_roster.fix_name">
<code class="sig-prename descclassname">hockey_scraper.nhl.playing_roster.</code><code class="sig-name descname">fix_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">player</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.playing_roster.fix_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get rid of (A) or (C) when a player has it attached to their name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>player</strong> – list of player info -&gt; [number, position, name]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>fixed list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.playing_roster.get_coaches">
<code class="sig-prename descclassname">hockey_scraper.nhl.playing_roster.</code><code class="sig-name descname">get_coaches</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">soup</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.playing_roster.get_coaches" title="Permalink to this definition">¶</a></dt>
<dd><p>scrape head coaches</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>soup</strong> – html</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict of coaches for game</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.playing_roster.get_content">
<code class="sig-prename descclassname">hockey_scraper.nhl.playing_roster.</code><code class="sig-name descname">get_content</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">roster</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.playing_roster.get_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses Beautiful soup to parses the html document.
Some parsers work for some pages but don’t work for others….I’m not sure why so I just try them all here in order</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>roster</strong> – doc</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>players and coaches</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.playing_roster.get_players">
<code class="sig-prename descclassname">hockey_scraper.nhl.playing_roster.</code><code class="sig-name descname">get_players</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">soup</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.playing_roster.get_players" title="Permalink to this definition">¶</a></dt>
<dd><p>scrape roster for players</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>soup</strong> – html</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict for home and away players</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.playing_roster.get_roster">
<code class="sig-prename descclassname">hockey_scraper.nhl.playing_roster.</code><code class="sig-name descname">get_roster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.playing_roster.get_roster" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a game_id it returns the raw html
Ex: <a class="reference external" href="http://www.nhl.com/scores/htmlreports/20162017/RO020475.HTM">http://www.nhl.com/scores/htmlreports/20162017/RO020475.HTM</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_id</strong> – the game</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>raw html of game</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.nhl.playing_roster.scrape_roster">
<code class="sig-prename descclassname">hockey_scraper.nhl.playing_roster.</code><code class="sig-name descname">scrape_roster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">game_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.nhl.playing_roster.scrape_roster" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given game scrapes the roster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>game_id</strong> – id for game</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict of players (home and away) an dict for both head coaches</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.utils.save_pages">
<span id="save-pages"></span><h3>Save Pages<a class="headerlink" href="#module-hockey_scraper.utils.save_pages" title="Permalink to this headline">¶</a></h3>
<p>Saves the scraped docs so you don’t have to re-scrape them every time you want to parse the docs.</p>
<p>**** Don’t mess with this unless you know what you’re doing ****</p>
<dl class="py function">
<dt id="hockey_scraper.utils.save_pages.check_file_exists">
<code class="sig-prename descclassname">hockey_scraper.utils.save_pages.</code><code class="sig-name descname">check_file_exists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.save_pages.check_file_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the file exists. Also check if structure for holding scraped file exists to. If not, it creates it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_info</strong> – Dictionary containing the info on the file. Includes the name, season, file type, and the dir
we want to deposit any data in.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean - True if it exists</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.save_pages.create_base_file_path">
<code class="sig-prename descclassname">hockey_scraper.utils.save_pages.</code><code class="sig-name descname">create_base_file_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.save_pages.create_base_file_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the base file path for a given file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_info</strong> – Dictionary containing the info on the file. Includes the name, season, file type, and the dir
we want to deposit any data in.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.save_pages.create_dir_structure">
<code class="sig-prename descclassname">hockey_scraper.utils.save_pages.</code><code class="sig-name descname">create_dir_structure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.save_pages.create_dir_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the basic directory structure for docs_dir if not done yet.
Creates the docs and csvs subdir if it doesn’t exist</p>
<p>:return None</p>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.save_pages.create_season_dirs">
<code class="sig-prename descclassname">hockey_scraper.utils.save_pages.</code><code class="sig-name descname">create_season_dirs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.save_pages.create_season_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the infrastructure to hold all the scraped docs for a season</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_info</strong> – Dictionary containing the info on the file. Includes the name, season, file type, and the dir
we want to deposit any data in.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.save_pages.get_page">
<code class="sig-prename descclassname">hockey_scraper.utils.save_pages.</code><code class="sig-name descname">get_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.save_pages.get_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the file so we don’t need to re-scrape.</p>
<p>Try both compressed and non-compressed for backwards compatability issues (formerly non-compressed)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_info</strong> – Dictionary containing the info on the file. Includes the name, season, file type, and the dir
we want to deposit any data in.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.save_pages.is_compressed">
<code class="sig-prename descclassname">hockey_scraper.utils.save_pages.</code><code class="sig-name descname">is_compressed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.save_pages.is_compressed" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if stored file is compressed as we used to not save them as compressed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_info</strong> – Dictionary containing the info on the file. Includes the name, season, file type, and the dir
we want to deposit any data in.</p>
</dd>
</dl>
<p>return Boolean</p>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.save_pages.save_page">
<code class="sig-prename descclassname">hockey_scraper.utils.save_pages.</code><code class="sig-name descname">save_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">page</span></em>, <em class="sig-param"><span class="n">file_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.save_pages.save_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the page we just scraped.</p>
<p>Note: It’ll only get saved if the directory already exists!!!!!!. I’m not dealing with any fuck ups. That would 
involve checking if it’s even a valid path and creating it. Make sure you get it right.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>page</strong> – File scraped</p></li>
<li><p><strong>file_info</strong> – Dictionary containing the info on the file. Includes the name, season, file type, and the dir
we want to deposit any data in.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-hockey_scraper.utils.shared">
<span id="shared-functions"></span><h3>Shared Functions<a class="headerlink" href="#module-hockey_scraper.utils.shared" title="Permalink to this headline">¶</a></h3>
<p>This file is a bunch of the shared functions or just general stuff used by the different scrapers in the package.</p>
<dl class="py function">
<dt id="hockey_scraper.utils.shared.add_dir">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">add_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user_dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.add_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Add directory to store scraped docs if valid. Or create in the home dir</p>
<p>NOTE: After this functions docs_dir is either None or a valid directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user_dir</strong> – If bool=True create in the home dire or if user provided directory on their machine</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.check_data_format">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">check_data_format</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_format</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.check_data_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if data_format specified (if it is at all) is either None, ‘Csv’, or ‘pandas’.
It exits program with error message if input isn’t good.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data_format</strong> – data_format provided</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean - True if good</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.check_valid_dates">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">check_valid_dates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">from_date</span></em>, <em class="sig-param"><span class="n">to_date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.check_valid_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if it’s a valid date range</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_date</strong> – date should scrape from</p></li>
<li><p><strong>to_date</strong> – date should scrape to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.convert_to_seconds">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">convert_to_seconds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minutes</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.convert_to_seconds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return minutes elapsed in time format to seconds elapsed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>minutes</strong> – time elapsed</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>time elapsed in seconds</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.custom_formatwarning">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">custom_formatwarning</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.custom_formatwarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Override format for standard wanings</p>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.fix_name">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">fix_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.fix_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a name falls under those that need fixing. If it does…fix it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – name in pbp</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Either the given parameter or the fixed name</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.get_file">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">get_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.get_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the specified file.</p>
<p>If a docs_dir is provided we check if it exists. If it does we see if it contains that page (and saves if it
doesn’t). If the docs_dir doesn’t exist we just scrape from the source and not save.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_info</strong> – Dictionary containing the info for the file.
Contains the url, name, type, and season</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>page</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.get_season">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">get_season</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.get_season" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Season based on from_date</p>
<dl class="simple">
<dt>There is an exception for the 2019-2020 pandemic season. Accoding to the below url:</dt><dd><ul class="simple">
<li><p>2019-2020 season ends in Oct. 2020</p></li>
<li><p>2020-2021 season begins in November 2020</p></li>
<li><p><a class="reference external" href="https://nhl.nbcsports.com/2020/07/10/new-nhl-critical-dates-calendar-means-an-october-free-agent-frenzy/">https://nhl.nbcsports.com/2020/07/10/new-nhl-critical-dates-calendar-means-an-october-free-agent-frenzy/</a></p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> – date</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>season -&gt; ex: 2016 for 2016-2017 season</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.get_team">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">get_team</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">team</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.get_team" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fucking team</p>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.if_rescrape">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">if_rescrape</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user_rescrape</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.if_rescrape" title="Permalink to this definition">¶</a></dt>
<dd><p>If you want to re_scrape. If someone is a dumbass and feeds it a non-boolean it terminates the program</p>
<p>Note: Only matters when you have a directory specified</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user_rescrape</strong> – Boolean</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.print_error">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">print_error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.print_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement own custom error using warning module.
Reason why i still use warning for errors is so i can set to ignore them if i want to (e.g. live_scrape line 200).</p>
<p>shared.print_error relies on this function.</p>
<p>See here for more on ANSI escape codes - <a class="reference external" href="https://en.wikipedia.org/wiki/ANSI_escape_code">https://en.wikipedia.org/wiki/ANSI_escape_code</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – Str to print</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.print_warning">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">print_warning</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.print_warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement own custom warning using warning module.</p>
<p>shared.print_error relies on this function.</p>
<p>See here for more on ANSI escape codes - <a class="reference external" href="https://en.wikipedia.org/wiki/ANSI_escape_code">https://en.wikipedia.org/wiki/ANSI_escape_code</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> – Str to print</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.scrape_page">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">scrape_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.scrape_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Scrape a given url</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>url</strong> – url for page</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>response object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.season_end_bound">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">season_end_bound</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.season_end_bound" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the end bound of a given season. Changes depending on if it’s the pandemic season or not</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>year</strong> – str of year for given date</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Datetime obj of last date in season</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.season_start_bound">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">season_start_bound</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.season_start_bound" title="Permalink to this definition">¶</a></dt>
<dd><p>Get start bound for a season.</p>
<p>There is a bug in the schedule API for 2016 that causes the pushback to 09-30</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>year</strong> – str of year for given date</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str of first date in season</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hockey_scraper.utils.shared.to_csv">
<code class="sig-prename descclassname">hockey_scraper.utils.shared.</code><code class="sig-name descname">to_csv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">base_file_name</span></em>, <em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">league</span></em>, <em class="sig-param"><span class="n">file_type</span></em><span class="sig-paren">)</span><a class="headerlink" href="#hockey_scraper.utils.shared.to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Write DataFrame to csv file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_file_name</strong> – name of file</p></li>
<li><p><strong>df</strong> – DataFrame</p></li>
<li><p><strong>league</strong> – nhl or nwhl</p></li>
<li><p><strong>file_type</strong> – type of file despoiting</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">NHL Scraping Functions</a><ul>
<li><a class="reference internal" href="#scraping">Scraping</a><ul>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.scrape_functions">Scrape Functions</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.game_scraper">Game Scraper</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.pbp.html_pbp">Html PBP</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.pbp.json_pbp">Json PBP</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.pbp.espn_pbp">Espn PBP</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.shifts.json_shifts">Json Shifts</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.shifts.html_shifts">Html Shifts</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.json_schedule">Schedule</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.nhl.playing_roster">Playing Roster</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.utils.save_pages">Save Pages</a></li>
<li><a class="reference internal" href="#module-hockey_scraper.utils.shared">Shared Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Hockey-Scraper</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="live_scrape.html"
                        title="next chapter">Live Scraping</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/nhl_scrape_functions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="live_scrape.html" title="Live Scraping"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Hockey-Scraper"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">hockey_scraper 1.36 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">NHL Scraping Functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Harry Shomer.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>